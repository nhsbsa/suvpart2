<!-- Extends the layout from /views/layout.html -->
{% extends 'layout.html' %}
<!-- 
  In /views/layout.html you can:
    - edit the header and footer 
    - add custom CSS and JavaScript
-->

<!-- Set the page title -->
{% block pageTitle %}
Content page example - NHS.UK prototype kit
{% endblock %}

<!-- For adding a breadcrumb -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/breadcrumbs -->
{% block beforeContent %}

<div class="nhsuk-secondary-navigation">
   <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-full">
         <div class="nhsuk-secondary-navigation__container">
            <div class="nhsuk-secondary-navigation__nav" style="width: 100%">
               <nav class="nhsuk-secondary-navigation" aria-label="Primary navigation">
                  <ul class="nhsuk-secondary-navigation__list">
                     <li class="nhsuk-secondary-navigation__item"><br /><br />
                        <!--<a class="nhsuk-secondary-navigation__link" href="javascript:history.back();">Back</a>-->
                     </li>
                  </ul>
               </nav>
            </div>
         </div>
      </div>
   </div>
</div>
{% endblock %}

<!-- For adding a back link -->
<!-- Code examples can be found at https://service-manual.nhs.uk/design-system/components/back-link -->
{% block outerContent %}
{% endblock %}

<!-- For adding page content -->
<!-- Page layout code can be found at https://service-manual.nhs.uk/design-system/styles/layout -->
{% block content %}

<div class="nhsuk-grid-row">
   <div class="nhsuk-grid-column-one-half">

      {{ backLink({
         text: 'Go back',
         href: 'javascript:history.back();',
         classes: 'nhsuk-u-margin-bottom-4'
      }) }}

      
      <div class="nhsuk-warning-callout">
         <h3 class="nhsuk-warning-callout__label">
            <span role="text">
               Important:
            </span>
         </h3>
         <p>All information must be read out to the patient.</p>
      </div>


      {{ panel({
      titleText: 'The penalty charge has been accepted',
      classes: 'nhsuk-u-margin-bottom-6'
      }) }}

      <h2 class="nhsuk-heading-m">What happens now</h2>
      <p>We'll send you a letter with your penalty charge details. This is for your records, and does not
         represent any extra charges.</p>
      <p>You do not need to wait for this letter to pay your penalty charge. You can make a payment now.</p>

      <!-- {{ warningCallout({
            heading: 'What happens now',
            classes: 'nhsuk-u-margin-bottom-0',
            html: '<p>We\'ll send you a letter with your penalty charge details. This is for your records, and does not
               represent any extra charges.</p>
            <p>You do not need to wait for this letter to pay your penalty charge. You can make a payment now.</p>
            '
            }) }} -->

      {% set buttonURL = 'add-payment' %}
      {% if data.settings[version].type === 'decs' %}
      {% set buttonURL = '../v6-pcn-decs/payment-method' %}
      {% endif %}



      <!-- <p>{{ radios({
         idPrefix: "example",
         name: "example",
         fieldset: {
         legend: {
         html: '
      <h3 class="nhsuk-heading-s">How would the customer like to pay?</h3>',
      size: "l",
      isPageHeading: false
      }
      },
      items: [
      {
      value: "pay-now",
      name:"choice",
      text: "Make a payment now"
      },
      {
      value: "direct-debit",
      name:"choice",
      text: "Set up a Direct Debit"
      }
      ]
      }) }}</p> -->

      <!-- {{ button({
            classes: 'nhsuk-u-margin-top-6',
            text: 'Continue',
            href: buttonURL
            }) }} -->
      <a id="action-button" href="/v7/PECS/view-pcn-expedited" class="nhsuk-button">Finish</a>

      <script>
         const button = document.getElementById("action-button");

         document.querySelectorAll('input[name="example"]').forEach(radio => {
            radio.addEventListener('change', () => {

               if (radio.value === "pay-now") {
                  button.href = "add-payment";
               }
               else if (radio.value === "direct-debit") {
                  button.href = "/v7/PECS/direct-debit/start";
               }

            });
         });
      </script>



   </div>


   <style>
      .highlighted {
         background-color: #007f3b;
         color: #FFF;
         display: inline;
      }
   </style>


   <div class="nhsuk-grid-column-one-half">
      <div class="border-box" id="rightHandSide">
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-full">
               <h1 class="nhsuk-heading-m">PCN 06183129565: Open</h1>
               <p class="nhsuk-heading-m"><a href="../view-prescription"> View prescription</a></p>
            </div>
            <!--<h1 class="nhsuk-heading-m">Direct Debit</h1>-->
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Prescription</h2>
               <p>£9.90</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Enquiry sent</h2>
               <p>{{ -2 | alterTodaysDateByNumberOfDays }}</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Items</h2>
               <p>3</p>
            </div>
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Penalty</h2>
               <p>£50.00</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">PCN sent</h2>
               <p class="highlighted">{{ 0 | alterTodaysDateByNumberOfDays }}</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Prescribed date</h2>
               <p>{{ -64 | alterTodaysDateByNumberOfDays }}</p>
            </div>
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Surcharge</h2>
               <p>Not sent</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Surcharge sent</h2>
               <p>Not sent</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Dispensed month end date</h2>
               <p>{{ -64 | alterTodaysDateByNumberOfDays }}</p>
            </div>
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Requested</h2>
               <p>£176.40</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Respond by</h2>
               <p class="highlighted">{{ 31 | alterTodaysDateByNumberOfDays }}</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Exemption</h2>
               <p>(M) Has valid NHS Tax Credit Exemption Certificate</p>
            </div>
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Paid</h2>
               <p>N/A</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">DWP checked</h2>
               <p>Yes</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Source</h2>
               <p>Electronic</p>
            </div>
         </div>
         <div class="nhsuk-grid-row">
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Balance due</h2>
               <p>N/A</p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Dispenser</h2>
               <p><a href="../dispenser-details">FMMMM</a></p>
            </div>
            <div class="nhsuk-grid-column-one-third">
               <h2 class="nhsuk-heading-xs nhsuk-u-margin-bottom-0">Evidence not seen?</h2>
               <p>No</p>
            </div>
         </div>

         <div class="scrollable-panel">
            <div class="nhsuk-grid-row">
               <div class="nhsuk-grid-column-full">
                  <div class="container">

                     {% set notesContent %}
                     {{ table({
                     responsive: false,
                     panel: false,
                     firstCellIsHeader: false,
                     head: [
                     {
                     text: "Date"
                     },
                     {
                     text: "Agent"
                     },
                     {
                     text: "Comments"
                     }
                     ],
                     rows: [
                     [
                     {
                     text: "30/11/2025 14:02"
                     },
                     {
                     text: "JALAT"
                     },
                     {
                     text: "Penalty Charge accepted and PCN letter issued"
                     }
                     ]
                     ]
                     }) }}
                     {% endset -%}
                     
                     {% set transactionsContent %}
                    
                     {{ table({
                     responsive: false,
                     panel: false,
                     firstCellIsHeader: false,
                     head: [
                     {
                     text: "Date"
                     },
                     {
                     text: "User"
                     },
                     {
                     text: "Amount"
                     },
                     {
                     text: "For"
                     },
                     {
                     text: "Type"
                     },
                     {
                     text: "Action"
                     }
                     ]
                     }) }}
                     {% endset -%}
                     
                     {% set auditContent %}
                     {{ table({
                     responsive: false,
                     panel: false,
                     firstCellIsHeader: false,
                     head: [
                     {
                     text: "Date"
                     },
                     {
                     text: "Agent"
                     },
                     {
                     text: "Comments"
                     }
                     ],
                     rows: [
                     [
                     {
                     text: "30/11/2025 14:02"
                     },
                     {
                     text: "JOECA"
                     },
                     {
                     text: "Status changed from enquiry to PCN"
                     }
                     ]
                     ]
                     }) }}
                     {% endset -%}
                     {{ tabs({
                     items: [
                     {
                     label: "Notes",
                     id: "notes",
                     panel: {
                     html: notesContent
                     }
                     },
                     {
                     label: "Transactions",
                     id: "transactions",
                     panel: {
                     html: transactionsContent
                     }
                     },
                     {
                     label: "Audit history",
                     id: "audit-history",
                     panel: {
                     html: auditContent
                     }
                     }
                     ]
                     }) }}
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

<script>
   var maxLength = 375;
   $('textarea').keyup(function () {
      var length = $(this).val().length;
      var length = maxLength - length;
      $('#chars').text(length);
   });
</script>

{% endblock %}